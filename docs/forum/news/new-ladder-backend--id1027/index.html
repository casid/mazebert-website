

<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="nofollow">
        <meta name="language" content="en">
        <title>New ladder backend</title>
        <link rel="stylesheet" href="https://mazebert.com/assets/css/mazebert.css?t=1690908854">
        <script src="https://mazebert.com/assets/js/jquery.min.js?t=1690908854"></script>
    </head>

    <body>
        <header>
            <nav class="navigation">
                <a class="nav-brand" href="https://mazebert.com/">
                    <img srcset="https://mazebert.com/assets/images/app-icon.png?t=1690908854, https://mazebert.com/assets/images/app-icon-2x.png?t=1690908854 2x" src="https://mazebert.com/assets/images/app-icon-2x.png?t=1690908854" class="app-icon" alt="Mazebert TD - Play your cards wisely to survive">
                </a>
                <div class="nav-mobile">
                    <div id="nav-icon">
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                    <span class="forum-badge badge"></span>
                </div>
                <div class="nav-menu">
                    <a href="https://mazebert.com/news/" class="nav-item">News</a>
                    <a href="https://mazebert.com/stats/" class="nav-item">Stats</a>
                    <a href="https://mazebert.com/cards/" class="nav-item">Cards</a>
                    <a href="https://mazebert.com/forum/" class="nav-item is-active">Forum<span class="forum-badge badge"></span></a>
                    <a href="https://mazebert.com/ladder/" class="nav-item">Ladder</a>
                    <a href="https://mazebert.com/credits/" class="nav-item">Credits</a>
                    <a href="https://mazebert.com/reviews/" class="nav-item">Reviews</a>
                </div>
            </nav>
        </header>

        <main class="has-navbar-fixed-top">
            <div class="container">
                <nav class="breadcrumbs">
                    <a href="https://mazebert.com/forum/">Forum</a>&nbsp;/
                    <a href="https://mazebert.com/forum/news/">News</a>&nbsp;/
                    <span>New ladder backend</span>
                </nav>
            </div>
            

    <div class="container">
        
<div class="post-content">
    <div class="post-author first">
        <div class="profile-picture">
            <img class="shadow" alt="Andy" src="https://secure.gravatar.com/avatar/5bf536d27c50cc30a6945c1d63f48535?s=160&amp;d=retro&amp;r=g" height="80" width="80">
            <div class="badge-wrapper">
                <span class="level">43</span>
                <img alt="Supporter Level 43" src="https://mazebert.com/assets/images/supporter-level-bg.png?t=1690908854" srcset="https://mazebert.com/assets/images/supporter-level-bg@2x.png?t=1690908854 2x">
            </div>
        </div>
        <div class="profile-content">
            <h4><a href="https://mazebert.com/player/115/">Andy</a></h4>
            <h5 class="subtitle">
                Level:&nbsp;109<br>
                Rank:&nbsp;325<br/><br/>
            </h5>
        </div>
        <div class="profile-more-content post-created" data-ts="1458090016">
        </div>
        <a href="https://mazebert.com/supporters/rag-nar-rog-supporter-pack/">
            <img alt="Rag nar Rog Supporter" style="float: right;" src="https://mazebert.com/assets/images/rnr-supporter-badge.png?t=1690908854" srcset="https://mazebert.com/assets/images/rnr-supporter-badge@2x.png?t=1690908854 2x"/>
        </a><br>
        <a href="https://mazebert.com/supporters/rise-of-cthulhu-supporter-pack/">
            <img alt="Rise of Cthulhu Supporter" style="float: right;" src="https://mazebert.com/assets/images/roc-supporter-badge.png?t=1690908854" srcset="https://mazebert.com/assets/images/roc-supporter-badge@2x.png?t=1690908854 2x"/>
        </a><br>
        <a href="https://mazebert.com/supporters/dawn-of-light-supporter-pack/">
            <img alt="Dawn of Light Supporter" style="float: right;" src="https://mazebert.com/assets/images/dol-supporter-badge.png?t=1690908854" srcset="https://mazebert.com/assets/images/dol-supporter-badge@2x.png?t=1690908854 2x"/>
        </a><br>
    </div>

    <h1>New ladder backend</h1>
    <a id="4927"></a>

    <span class="post-content-text">The ladder backend is ported to Java. After integration testing the development environment during the past few days, I feel confident enough to go live with the new backend. 1, 2, 3 live!

Players shouldn't recognize the switch (except maybe a slightly improved performance).

Although the whole thing is written test-driven with a coverage of 93% percent and the fact that I manually tested each usecase with the current app, there might still be bugs that slipped through.

If you notice anything weird about the ladder backend, I'd be glad if you throw me a message!

And the good news: After this being done now, I have time again to add new game content. Yay!</span>

    <button data-playerid="115" data-postid="4927" class="edit-post-button">Edit</button>
</div>
<hr/>

        
<div class="post-content">
    <div class="post-author">
        <div class="profile-picture">
            <img class="shadow" alt="Unknown Wizard" src="https://secure.gravatar.com/avatar?s=160&amp;d=retro&amp;r=g" height="80" width="80">
        </div>
        <div class="profile-content">
            <h4>Unknown Wizard</h4>
            <h5 class="subtitle">
                Level:&nbsp;-<br>
                Rank:&nbsp;-<br/><br/>
            </h5>
        </div>
        <div class="profile-more-content post-created" data-ts="1458090795">
        </div>
    </div>

    <a id="6045"></a>

    <span class="post-content-text">Good work Andy. Huzzah for new content!</span>

    <button data-playerid="0" data-postid="6045" class="edit-post-button">Edit</button>
</div>
<hr/>

        
<div class="post-content">
    <div class="post-author">
        <div class="profile-picture">
            <img class="shadow" alt="Romeo" src="https://secure.gravatar.com/avatar/cc4cf0cc529893aacd186ca168549e3f?s=160&amp;d=retro&amp;r=g" height="80" width="80">
        </div>
        <div class="profile-content">
            <h4>Romeo</h4>
            <h5 class="subtitle">
                Level:&nbsp;-<br>
                Rank:&nbsp;-<br/><br/>
            </h5>
        </div>
        <div class="profile-more-content post-created" data-ts="1458150834">
        </div>
    </div>

    <a id="6046"></a>

    <span class="post-content-text">Hooray! Moar content! Can't wait to see what's in the pipeline.</span>

    <button data-playerid="0" data-postid="6046" class="edit-post-button">Edit</button>
</div>
<hr/>

        
<div class="post-content">
    <div class="post-author">
        <div class="profile-picture">
            <img class="shadow" alt="Kline" src="https://secure.gravatar.com/avatar/74d9a267379ccdbe97106c4031880d12?s=160&amp;d=retro&amp;r=g" height="80" width="80">
        </div>
        <div class="profile-content">
            <h4>Kline</h4>
            <h5 class="subtitle">
                Level:&nbsp;-<br>
                Rank:&nbsp;-<br/><br/>
            </h5>
        </div>
        <div class="profile-more-content post-created" data-ts="1459283385">
        </div>
    </div>

    <a id="6069"></a>

    <span class="post-content-text">Is this working for bonus round scores in addition to level? Ladder seems to be tracking my level ok but I hit a nice bonus round record (and screenshotted it so I can track my build) that I don't see reflected at all.</span>

    <button data-playerid="0" data-postid="6069" class="edit-post-button">Edit</button>
</div>
<hr/>

        
<div class="post-content">
    <div class="post-author">
        <div class="profile-picture">
            <img class="shadow" alt="Andy" src="https://secure.gravatar.com/avatar/5bf536d27c50cc30a6945c1d63f48535?s=160&amp;d=retro&amp;r=g" height="80" width="80">
            <div class="badge-wrapper">
                <span class="level">43</span>
                <img alt="Supporter Level 43" src="https://mazebert.com/assets/images/supporter-level-bg.png?t=1690908854" srcset="https://mazebert.com/assets/images/supporter-level-bg@2x.png?t=1690908854 2x">
            </div>
        </div>
        <div class="profile-content">
            <h4><a href="https://mazebert.com/player/115/">Andy</a></h4>
            <h5 class="subtitle">
                Level:&nbsp;109<br>
                Rank:&nbsp;325<br/><br/>
            </h5>
        </div>
        <div class="profile-more-content post-created" data-ts="1459299747">
        </div>
        <a href="https://mazebert.com/supporters/rag-nar-rog-supporter-pack/">
            <img alt="Rag nar Rog Supporter" style="float: right;" src="https://mazebert.com/assets/images/rnr-supporter-badge.png?t=1690908854" srcset="https://mazebert.com/assets/images/rnr-supporter-badge@2x.png?t=1690908854 2x"/>
        </a><br>
        <a href="https://mazebert.com/supporters/rise-of-cthulhu-supporter-pack/">
            <img alt="Rise of Cthulhu Supporter" style="float: right;" src="https://mazebert.com/assets/images/roc-supporter-badge.png?t=1690908854" srcset="https://mazebert.com/assets/images/roc-supporter-badge@2x.png?t=1690908854 2x"/>
        </a><br>
        <a href="https://mazebert.com/supporters/dawn-of-light-supporter-pack/">
            <img alt="Dawn of Light Supporter" style="float: right;" src="https://mazebert.com/assets/images/dol-supporter-badge.png?t=1690908854" srcset="https://mazebert.com/assets/images/dol-supporter-badge@2x.png?t=1690908854 2x"/>
        </a><br>
    </div>

    <a id="6071"></a>

    <span class="post-content-text">Hi Kline!

Bonus round scores *should* work, at least with the test data I used.

Maybe you did not have internet access (or the submission failed) when you finished the bonus round? In this case the game will retry to send the score next time it synchronizes with the backend.

If this doesn't help, could you send me your player name, together with the screenshot you took? This would extremely help me to sort this out.

Cheers!</span>

    <button data-playerid="115" data-postid="6071" class="edit-post-button">Edit</button>
</div>
<hr/>

        
<div class="post-content">
    <div class="post-author">
        <div class="profile-picture">
            <img class="shadow" alt="Kline" src="https://secure.gravatar.com/avatar/74d9a267379ccdbe97106c4031880d12?s=160&amp;d=retro&amp;r=g" height="80" width="80">
        </div>
        <div class="profile-content">
            <h4>Kline</h4>
            <h5 class="subtitle">
                Level:&nbsp;-<br>
                Rank:&nbsp;-<br/><br/>
            </h5>
        </div>
        <div class="profile-more-content post-created" data-ts="1459307756">
        </div>
    </div>

    <a id="6072"></a>

    <span class="post-content-text">Pretty sure Internet and the rest was working then as I was able to watch my level ladder position keep climbing within the game. I'll email you the screenshot and such here in a few, thanks!</span>

    <button data-playerid="0" data-postid="6072" class="edit-post-button">Edit</button>
</div>
<hr/>

        
<div class="post-content">
    <div class="post-author">
        <div class="profile-picture">
            <img class="shadow" alt="Andy" src="https://secure.gravatar.com/avatar/5bf536d27c50cc30a6945c1d63f48535?s=160&amp;d=retro&amp;r=g" height="80" width="80">
            <div class="badge-wrapper">
                <span class="level">43</span>
                <img alt="Supporter Level 43" src="https://mazebert.com/assets/images/supporter-level-bg.png?t=1690908854" srcset="https://mazebert.com/assets/images/supporter-level-bg@2x.png?t=1690908854 2x">
            </div>
        </div>
        <div class="profile-content">
            <h4><a href="https://mazebert.com/player/115/">Andy</a></h4>
            <h5 class="subtitle">
                Level:&nbsp;109<br>
                Rank:&nbsp;325<br/><br/>
            </h5>
        </div>
        <div class="profile-more-content post-created" data-ts="1459339312">
        </div>
        <a href="https://mazebert.com/supporters/rag-nar-rog-supporter-pack/">
            <img alt="Rag nar Rog Supporter" style="float: right;" src="https://mazebert.com/assets/images/rnr-supporter-badge.png?t=1690908854" srcset="https://mazebert.com/assets/images/rnr-supporter-badge@2x.png?t=1690908854 2x"/>
        </a><br>
        <a href="https://mazebert.com/supporters/rise-of-cthulhu-supporter-pack/">
            <img alt="Rise of Cthulhu Supporter" style="float: right;" src="https://mazebert.com/assets/images/roc-supporter-badge.png?t=1690908854" srcset="https://mazebert.com/assets/images/roc-supporter-badge@2x.png?t=1690908854 2x"/>
        </a><br>
        <a href="https://mazebert.com/supporters/dawn-of-light-supporter-pack/">
            <img alt="Dawn of Light Supporter" style="float: right;" src="https://mazebert.com/assets/images/dol-supporter-badge.png?t=1690908854" srcset="https://mazebert.com/assets/images/dol-supporter-badge@2x.png?t=1690908854 2x"/>
        </a><br>
    </div>

    <a id="6073"></a><a id="latest"></a>

    <span class="post-content-text">Thanks for your mail! I looked into it this morning and indeed there was a problem with the score submission.

I fixed the submission for new scores and did a temporary migration step to fix the wrongly submitted scores.

This means your score is listed in the ladder now :-)

Thanks for reporting!</span>

    <button data-playerid="115" data-postid="6073" class="edit-post-button">Edit</button>
</div>
<hr/>

    </div>

    <script>
    var formatTimeDelta = {
        ONE_MINUTE: 60,
        ONE_HOUR: 3600,
        ONE_DAY: 86400,
        ONE_MONTH: 2592000,
        ONE_YEAR: 31536000,

        formatTimeValueSuffix: function (value, unit, suffix) {
            value = Math.floor(value);
            if (value < 1 || value > 1) {
                unit += "s";
            }
            return value + " " + unit + suffix;
        },

        formatTimeValue: function (value, unit) {
            return this.formatTimeValueSuffix(value, unit, " ago");
        },

        formatYears: function (delta) {
            return this.formatTimeValue(delta / this.ONE_YEAR, "year");
        },

        formatMonths: function (delta) {
            return this.formatTimeValue(delta / this.ONE_MONTH, "month");
        },

        formatDays: function (delta) {
            return this.formatTimeValue(delta / this.ONE_DAY, "day");
        },

        formatHours: function (delta) {
            return this.formatTimeValue(delta / this.ONE_HOUR, "hour");
        },

        formatMinutes: function (delta) {
            return this.formatTimeValue(delta / this.ONE_MINUTE, "minute");
        },

        formatSeconds: function (delta) {
            return this.formatTimeValue(delta, "second");
        },

        formatDelta: function (delta) {
            if (delta <= 0) {
                return 'now';
            }

            if (delta < this.ONE_MINUTE) return this.formatSeconds(delta);
            if (delta < this.ONE_HOUR) return this.formatMinutes(delta);
            if (delta < this.ONE_DAY) return this.formatHours(delta);
            if (delta < this.ONE_MONTH) return this.formatDays(delta);
            if (delta < this.ONE_YEAR) return this.formatMonths(delta);
            return this.formatYears(delta);
        },

        formatDeltaVerbose: function(delta) {
            if (delta < 0) {
                delta = 0;
            }

            return this.formatTimeValueSuffix(delta / this.ONE_DAY, 'day', ', ') +
                   this.formatTimeValueSuffix((delta % this.ONE_DAY) / this.ONE_HOUR, 'hour', ', ') +
                   this.formatTimeValueSuffix((delta % this.ONE_HOUR) / this.ONE_MINUTE, 'minute', ', ') +
                   this.formatTimeValueSuffix(Math.floor(delta) % this.ONE_MINUTE, 'second', '');
        },

        formatElement: function($element) {
            var delta = (Date.now() / 1000) - $element.data('ts');
            $element.html(this.formatDelta(delta));

            return delta;
        },

        format: function($selector) {
            var that = this;
            var elementsToRefresh = [];

            $selector.each(function() {
                var delta = that.formatElement($(this));

                if (delta < that.ONE_HOUR) {
                    elementsToRefresh[elementsToRefresh.length] = $(this);
                }
            });

            if (elementsToRefresh.length > 0) {
                setInterval(function(){
                    for (var i = 0; i < elementsToRefresh.length; ++i) {
                        that.formatElement(elementsToRefresh[i]);
                    }
                }, 1000);
            }
        },
    }
</script>
    <script>
        $(document).ready(function() {
            formatTimeDelta.format($('.post-created'));
        });
    </script>

            <div id="card-preview" style="position: absolute; display: none; top: 0; left: 0;">
    <img src="" srcset="" alt="Preview" />
</div>

<script>
$(document).ready(function() {
    var CardInfo = function() {
        this.id = 0;
        this.type = null;
    };

    var CardPreview = function() {

        this.calculateCardTypePrefix = function(type) {
            if (type === 'hero') return 'heroes/golden/Hero';
            if (type === 'tower') return 'towers/golden/Tower';
            if (type === 'item') return 'items/golden/Item';
            if (type === 'potion') return 'potions/golden/Potion';
            return '';
        };

        this.calculateImagePath = function(cardInfo) {
            var path = 'https://mazebert.com/wp-content/themes/twentytwelve/images/';
            path += this.calculateCardTypePrefix(cardInfo.type);
            path += '-' + cardInfo.id + '-card-preview.png';

            return path;
        };

        this.calculateImagePath2x = function(cardInfo) {
            var path = 'https://mazebert.com/wp-content/themes/twentytwelve/images/';
            path += this.calculateCardTypePrefix(cardInfo.type);
            path += '-' + cardInfo.id + '-card.png';

            return path;
        };

        this.show = function(cardInfo) {
            var image = $('#card-preview img');
            image.attr('src', this.calculateImagePath(cardInfo));
            image.attr('srcset', this.calculateImagePath2x(cardInfo) + " 2x");
            $('#card-preview').show();
        };

        this.hide = function() {
            $('#card-preview').hide();
        };

        this.update = function(x, y) {
            var offsetX = 60;
            if (x > $(document).width() / 2) {
                offsetX = -320 - 30;
            }
            $('#card-preview').css('left', x + offsetX).css('top', y - 212);
        };
    };

    var CardInfoParser = function() {

        this.parseCssInfo = function(cssClass, classPrefix, defaultValue) {
            if (cssClass.indexOf(classPrefix) === 0) {
                return cssClass.substr(classPrefix.length);
            } else {
                return defaultValue;
            }
        };

        this.parseCardInfo = function(classes) {
            var cardInfo = new CardInfo();
            classes = classes.split(' ');

            for (var i = 0, length = classes.length; i < length; ++i) {
                cardInfo.id = this.parseCssInfo(classes[i], 'card-id-', cardInfo.id);
                cardInfo.type = this.parseCssInfo(classes[i], 'card-type-', cardInfo.type);
            }

            return cardInfo;
        };
    };

    var cardPreview = new CardPreview();
    var cardInfoParser = new CardInfoParser();

    $('span.card-info').mouseenter(function() {
        var classes = $(this).attr('class');
        cardPreview.show(cardInfoParser.parseCardInfo(classes));
    }).mouseleave(function() {
        cardPreview.hide();
    }).mousemove(function(event) {
        var relX = event.pageX;
        var relY = event.pageY;

        cardPreview.update(relX, relY);
    });
});
</script>
        </main>

        <footer class="footer">
            <div class="content has-text-centered">
                <p>
                    <strong>Mazebert TD</strong> by Andreas Hager.<br/>
                    <a href="https://mazebert.com/privacy-policy/">Privacy</a>. <a href="https://mazebert.com/legal-notice/">Legal notice</a>.
                </p>
            </div>
        </footer>

        <script>
            $(document).ready(function() {
                $('.nav-mobile').click(function(){
                    $('#nav-icon').toggleClass('open');
                    $('.nav-menu').toggleClass('open');
                });
            });
        </script>

    </body>
</html>

